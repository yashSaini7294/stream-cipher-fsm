<!DOCTYPE html>
<html>
<head>
    <title>Stream Cipher Encryption</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
	<div class="container">
		<h2>Stream Cipher Encryption</h2>

		{% with messages = get_flashed_messages() %}
		  {% if messages %}
			<ul>
			  {% for message in messages %}
				<li><strong>{{ message }}</strong></li>
			  {% endfor %}
			</ul>
		  {% endif %}
		{% endwith %}

		<form method="post" enctype="multipart/form-data">
			<label>Upload file:</label><br>
			<input type="file" name="file" required><br><br>

			<label>Enter seed (leave blank for random seed generation):</label><br>
			<input type="text" name="seed" placeholder="e.g. 123"><br><br>

			<button type="submit">Encrypt/Decrypt</button>
		</form>

		{% if download_file %}
		  <br>
		  <a href="{{ url_for('download', filename=download_file) }}" download>â¬‡ Download Encrypted File</a>
		{% endif %}
	</div>

    <script>
      // Remove ?filename=... from URL after displaying the link once
      window.onload = function() {
        if (window.location.search.includes('filename=')) {
          window.history.replaceState(null, null, window.location.pathname);
        }
      }
    </script>
</body>
</html>
